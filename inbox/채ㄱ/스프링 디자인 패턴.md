# 스프링 디자인 패턴
디자인패턴 나온이유가 SOLID 지키기 위해
SOLID의 목표는 높은 응집력과 느슨한 결합
### SRP
### OCP
비슷한클래스 추가되더라도 인터페이스로 자연스럽게 추가 할수있고
인터페이스를 씀으로써 사용하는 쪽에서 클래스가 변경되더라도 사용하는쪽은 그대로 있어야한다 개방에 폐쇄되어있어야한다
### LSP (리스코브는 사람이름)
치환이 되냐 상속관계가 잘 되어있냐 보자는거다
서브타입은 언제나 자기의 기반타입으로 교체할수 있어야 한다
### ISP 인터페이스 분리의법칙
클라이언트에서 쓰지 않는 기능까지 의존하면 안된다.
### DIP
aoc,di와 연관
자주변경되는 하위클래스를 직접 의존하지 말고 기반 클래스 의존하라
고수준모듈 - 사용하는쪽
저수준 - 사용당하는쪽
고수준모듈은 저수준모듈을 직접 의존하면 안된다.
OCP는 확장에 초점 DIP는 기반클래스에 초점
쓰는쪽에서 하위클래스 모르고 기반만보고 써라
의존관계역전으로 한 이유는 사용하는쪽-> 기반클래스 <- 하위클래스 처럼 의존도 화살표가 한쪽으로 가지않고 역전됐다
### 패턴 종류
### 생성
Factorypattern
* abstract factory pattern (GOF에서)
  * 팩토리인터페이스에서 펙토리메소드들이 필요한 객체들 제공해준다. 팩토리인터페이스 구현 클래스를 정해주면 팩토리메서드의 반환값으로 필요한 클래스를 제공한다. 클라이언트에서 팩토리메소드 정해지기만 하면 필요한거를 가져와서 사용하게 된다.
  * 스프링에서 사용 클래스를 쉽게 설정해서 코드상 안넣어도 되게끔 한다
* factory method pattern (GOF에서)
* simple factory pattern (Spring에서 많이씀)
  * 팩토리 클래스가 객체 생성해서 반환해주는 단순한.

### 구조
### 행위
제어의 역전 IoC
내가 관리할 흐름에서 객체생성하고 객체메소드 쓰고 하는데 인터페이스로 외부에서 객체를 받아오면 외부에서 객체생성하고 메소드 흐름을 가지고 있다. 제어가 외부로 역전됐다
DI
의존하는 객체를 주입한다.
### 스프링프레임워크
EJB는 프레임워크에 쓸거 같은거 다 만들어놔서 엄청 무겁고 제공 되어있는것만 쓸수 있다
스프링은 쓰고 싶은거만 쓸수 있고 직접 필요한거 만들수 있다
어떻게? 프레임워크에 깨끗하게 결합성 없애서 필요할때 빈을 만들어서 의존성주입 시켜버려라
ex) EJB는 DB에서 Mybatis, ibatis, 하이버네이트 등 다 제공, 스프링은 하이버네이트만 붙일수 있다
1.컨테이너안에 등록 2.프로덕션코드에 주입 3.프로덕션코드에서 사용
스프링은 경량 프레임워크 , 설정이 반이다.
설정 관리 하는 클래스가 simple factory pattern 으로 제공되서 @Configuration으로 지정가능
그리고 메소드마다 빈을 반환할수 있게 @Bean 지정
설정클래스를 통해서 빈을 가져오려면 스프링에게 요청해야되는데 스프링컨테이너객체에 부탁한다.
BeanFactory<-ApplicationContext<-WebApplicationContext 인데
BeanFactory는 빈들을 걍 관리하고 ApplicationContext 좀더 기능 확장된거 WebApplicationContext이 웹을 위한게 더 추가된거
### Proxy 패턴
클라이언트에서는 모르지만 실제로는 실제 객체를 대신 호출해주는 프록시에게 호출하게 되는 ..
실제 객체가 겁나 무거워서 프락시가 생성될때 실제객체를 만들수 있게 한다. 프록시에서 보호할수 있다 실제 객체를
그걸하기위해 프락시와 실제객체의 인터페이스를 클라이언트가 호출한다. 주입을 프락시로 해주면 됨.
설명한건 프락시패턴+데코레이션패턴
RMI에서 프락시패턴 들어감
이걸 구현한게 AOP
### AOP
비지니스 로직 = 공통비지니스로직(횡당관심사) + 핵심비지니스로직
컨테이너에 핵심로직빈을 쓸때 공통로직빈을 같이 쓰게 설정으로 알려준다. 그때 프락시패턴으로 처리해준다.
aop는 많은 컨테이너에서 쓴다
트랜잭션,로깅,보안처리 등등 이런부분이 스프링에서 많이 제공해준다 등록만 해주면 된다
joinpoint : 공통관심사항이 적용 될수 있는 지점. Spring AOP는 메소드에만 지원해서 메소드 전후에 적용할수 있다
pointcut : joinpoint들 중 실제 공통관심사항을 적용할 대상들
Advice : 공통관심사항을 어느시점에 핵심관심사항에 적용할지에 대한 정의
Aspect : Advice ,pointcut 묶은개념
Weaving : 프록시 같은... AOP컨테이너가 Advice를 핵심로직에 적용하는것.
@Aspect //공통관심로직을 구현할 클래스 명시
메소드에다가 @After등등
@pointcut 핵심관심사 써준다 , 명시자로
설정클래스에다가 @EnableAspectJAutoProxy를 붙어줘야 컨테이너가 합쳐준다 공통과 핵심을
실행시점에 proxy클래스를 만들어서 합치는 로직이 실행된다

#dev/book