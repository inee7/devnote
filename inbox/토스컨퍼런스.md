## 분산트랜잭션
성공실패알수없음 여러 결과가 될수있다
결제에서 할인,포인트,머니(충전,사용),재시도 등 여러 서브트랜잭션으로 나뉨
트리로 설명함 
2pc와 사가와 다르다
레벨별로 테이블 나눴다

## 레거시원장
결제한 거래내역을 저장한 원장 
레거시에 일관성 없는 테이블 구조
온보딩과 운영 난이도가 높아져 
오라클+마이바티스 -> mysql +jpq 로 바꾸고 
독립 인프라 구성 
mysql이 오픈소스고 테스트에 유리? 
불변위해 테이블 insert만 해서 승인과 취소 각각 쌓임  <- 왜일까
결제 이벤트를 카프카로 풀고 
비동기로 풀었는데 스레드풀 힘들면 버리고 검증배치로 했다 
검증배치가 레거시와 신규 디비 모두 비교 
캐시 사용
서로다른 네트워크가 힘든것도 있었다 (IDC,  AWS)
네트워크 모니터링
쿼리인덱스 데이터 커지니 옵티마이저로 풀스캔되어버려서 쿼리힌트사용 
멱등키 사용


## ​설정devops


오버레이 아키텍처-템플릿패턴
api 설정은 템플릿으로 

배치 jenkins로
job dsl 플러그인 사용했고
groovy로 배치를 위한 정의를 빌더 패턴으로 제공 
노드에 job 자동으로 리소스 조절- 다이나믹프로비저닝

테라폼, 아르구신
## 10년차 권태기
명확한목표, 적당한 난의도, 즉각피드백이 없다면 무료함 
반복되고 동기상실되고 번아웃온다 
flow(몰입)
나만의 목표를 만든다 
당일코딩당일배포로 즉각 피드백을 줘봤다 
재밌어서 한일이 돈을 받게 되면 재미없어진다 
외재적동기가 돈,명예인데 금방잃는다
내재적동기가 오래간다 이건 흥미, 성장욕구, 의미가 있는거 
자율성(내가 하고싶어서하는거), 유능감 (일을 잘한다), 관계성(주변 사람들과 함께) 가 높아지면 내재적 동기 높아진다 

번아웃 극복이란 스트레스 관리다 
예로 숙면이다 수면부족은 몸에 잠을 줄어들면 몸이 긴급상황이라고 생각해서 얕게 자게 만든다고 한다 
주말=주중 기상시간 통일시키자 
잠자리에서 잠만자자 침실 서능 

반복(flow) 동기상실(내재적동기) 번아웃(스트레스관리) 로 해결하자 