---
tags: [design-pattern, kotlin, creational]
---

# 팩토리 메서드 패턴

## 한 줄 요약

객체 생성 로직을 캡슐화하여 조건에 따라 적절한 객체를 반환하는 패턴

## 핵심 정리

- 객체 생성 로직을 함수로 캡슐화
- 조건에 따라 다른 타입의 객체 생성
- 생성자에 비해 명시적인 이름을 붙일 수 있음

## 상세 내용

### 기본 팩토리 메서드

```kotlin
fun createPiece(notation: String): ChessPiece {
    val (type, file, rank) = notation.toCharArray()
    return when (type) {
        'q' -> Queen(file, rank)
        'p' -> Pawn(file, rank)
        // ...
        else -> throw RuntimeException("Unknown piece: $type")
    }
}
```

notation이란 문자열을 받아서 Queen, Pawn 등 객체를 만들어 낸다.

### 정적 팩토리 메서드

생성자에 비해 명시적인 이름을 붙일 수 있다.

**장점:**
- 캐시를 적용할 수 있음 (`Long.valueOf`에서 파싱한 적 있는 객체를 반환)
- 하위 클래스의 인스턴스도 생성 가능
- 명시적인 이름으로 의도를 명확히 표현

```kotlin
class Server private constructor(port: Long) {
    init {
        println("Server started on port $port")
    }

    companion object {
        fun withPort(port: Long): Server {
            return Server(port)
        }
    }
}
```

### Companion Object와의 차이

동반 객체는 `object`와 다르게 클래스 로딩할 때 초기화된다.

## 관련 노트

- [[디자인패턴-추상-팩토리]] - 관련 제품군을 생성하는 팩토리의 팩토리 (비교)

---

**출처**
- 코틀린 디자인 패턴
