# 대용량 CUD시 주의 checkpoint

CUD 작업이 일어나면 디스크에서 메모리(버퍼풀)로 데이터를 올려서 작업을하고 디스크에는 redo log(복구를 위함)를 쌓는다 

innoDB가 redo log가 과하게 쌓이거나 checkpoint age가 길었다고 치면 강제플러싱(체크포인트)을 통해 메모리에 변경된 부분을 디스크에 저장하고 redo log를 정리한다 

평소 감당할수 있는 용량이라면 백그라운드에서 잘 정리하겠지만
대용량이라면 강제 대규모 플러싱으로 다른 트랜잭션에 영향을 준다

1. 강제 플러싱 시점이라면 대규모건이고 메모리에서 디스크로 저장할때 디스크 I/O로 병목이 발생할수 있다 
2. 대용량 CUD로 버퍼풀이 꽉차있어 다른 트랜잭션에서 필요한 데이터를 메모리에서 읽지 못하고 디스크에서 바로 읽어야할 수 있다 

그리고 
강제플러싱도 할수 없이 너무 큰 규모라면 redo log 파일의 크기는 정해져있으며 꽉 차면 더이상 새로운 CUD작업을 하지 못하고 셧다운된다  
장애시 redo log가 너무 크면 복구 시간도 매우 길어진다 

#db #mysql
