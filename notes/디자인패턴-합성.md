---
tags: [design-pattern, kotlin, structural]
---

# 합성 패턴

## 한 줄 요약

개별 객체와 객체의 집합을 동일하게 다룰 수 있도록 트리 구조로 구성하는 패턴

## 핵심 정리

- 개별 객체와 복합 객체를 동일한 인터페이스로 처리
- 트리 구조의 객체 계층을 표현
- 반복자 패턴과 짝을 이룸
- UI에서 많이 사용됨

## 상세 내용

### 기본 구조

```kotlin
class Squad(val units: List<Trooper>)

val bobaFett = StormTrooper(Rifle(), RegularLegs())
val squad = Squad(listOf(bobaFett.copy(), bobaFett.copy(), bobaFett.copy()))

class Squad(private val units: List<Trooper>) {
    fun move(x: Long, y: Long) {
        for (u in units) {
            u.move(x, y)
        }
    }
    fun attack(x: Long, y: Long) {
        for (u in units) {
            u.attack(x, y)
        }
    }
}
```

### 인터페이스 구현

Trooper가 모여 Squad를 만든다. Trooper가 할 수 있는 행위를 그대로 가져가려면 인터페이스를 구현하면 된다:

```kotlin
class Squad(private val units: List<StormTrooper>): Trooper {
    override fun move(x: Long, y: Long) {
        for (u in units) {
            u.move(x, y)
        }
    }
    override fun attackRebel(x: Long, y: Long) {
        for (u in units) {
            u.attackRebel(x, y)
        }
    }
}
```

### 특징

- 개별 객체(Leaf)와 복합 객체(Composite)가 같은 인터페이스 구현
- 클라이언트는 개별인지 복합인지 신경 쓸 필요 없음
- 재귀적 구조로 중첩된 계층 표현 가능
- 반복자 패턴과 함께 사용하면 순회 가능

### 반복자 패턴과의 관계

합성 패턴은 반복자 패턴과 짝을 이룬다. UI에서 많이 쓴다.

---

**출처**
- 코틀린 디자인 패턴
